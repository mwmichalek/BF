@inherits BFComponent;

@using Syncfusion.EJ2.Blazor.Buttons
@using BF.Service.Events
@using BF.Common.Events
@using BF.Common.Components
@using BF.Common.States

<EjsButton CssClass="e-flat" 
           IsPrimary="true" 
           Content="@Content" 
           IsToggle="true" 
           OnClick="OnToggleClick" 
           @ref="ToggleBtnObj">
</EjsButton>

@code {
    EjsButton ToggleBtnObj;

    string Content = "Start";

    //TODO: (Need to rework this to handle switching between Phases

    public void OnToggleClick() {
        if (ToggleBtnObj.Content == "Start") {
            this.Content = "Stop";
            EventHandler.ComponentStateRequestFiring(new ComponentStateRequest<PumpRequestState> {
                RequestState = new PumpRequestState {
                    Id = ComponentId,
                    IsEngaged = true
                }
            });
        } else {
            this.Content = "Start";
            EventHandler.ComponentStateRequestFiring(new ComponentStateRequest<PumpRequestState> {
                RequestState = new PumpRequestState {
                    Id = ComponentId,
                    IsEngaged = false
                }
            });
        }
    }
}
